{"ast":null,"code":"var _jsxFileName = \"/home/general/Escritorio/Front_stafko/src/Components/Proyectos/Dashboard.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useQuery, useMutation, QueryClient } from 'react-query';\nimport { Table } from 'primereact/table';\nimport { Button } from 'primereact/button';\nimport { confirmDialog } from 'primereact/confirmdialog';\nimport { Toast } from 'primereact/toast';\nimport { useMutationMode, useResource } from '@pankod/refine';\nimport Swal from 'sweetalert2';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst queryClient = new QueryClient();\nconst Dashboard = () => {\n  _s();\n  const [proyectos, setProyectos] = useState([]);\n  const {\n    data,\n    isLoading,\n    error\n  } = useQuery('data', () => Promise.resolve(proyectos), {\n    enabled: !!proyectos.length\n  });\n  useEffect(() => {\n    async function fetchData() {\n      try {\n        const response = await fetch(\"http://localhost:3000/projects/\");\n        if (response.ok) {\n          const data = await response.json();\n          setProyectos(data);\n        } else {\n          console.error(\"Error al obtener los proyectos:\", response.statusText);\n        }\n      } catch (error) {\n        console.error(\"Error al comunicarse con el servidor:\", error);\n      }\n    }\n    fetchData();\n  }, []);\n  const {\n    mutate: deleteItem\n  } = useMutation(deleteData, {\n    onSuccess: () => {\n      queryClient.invalidateQueries('data');\n      toast.current.show({\n        severity: 'success',\n        summary: 'Success',\n        detail: 'Item deleted successfully'\n      });\n    },\n    onError: () => {\n      toast.current.show({\n        severity: 'error',\n        summary: 'Error',\n        detail: 'Failed to delete item'\n      });\n    }\n  });\n  const {\n    setIsEditing\n  } = useMutationMode();\n  const resource = useResource();\n  const confirmDelete = id => {\n    confirmDialog({\n      message: 'Are you sure you want to delete this item?',\n      header: 'Delete Confirmation',\n      icon: 'pi pi-info-circle',\n      accept: () => {\n        deleteItem(id);\n      },\n      reject: () => {}\n    });\n  };\n  const editItem = id => {\n    setIsEditing({\n      [resource]: id\n    });\n  };\n  const toast = React.useRef(null);\n  if (isLoading) return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"Loading...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 65,\n    columnNumber: 27\n  }, this);\n  if (error) return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [\"Error: \", error.message]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 66,\n    columnNumber: 23\n  }, this);\n  const columns = [{\n    field: 'id',\n    header: 'ID'\n  }, {\n    field: 'name',\n    header: 'Name'\n  }, {\n    field: 'description',\n    header: 'Description'\n  }, {\n    field: 'actions',\n    header: 'Actions'\n  }];\n  const actionTemplate = rowData => {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(Button, {\n        label: \"Edit\",\n        icon: \"pi pi-pencil\",\n        className: \"p-button-rounded p-button-info\",\n        onClick: () => editItem(rowData.id)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        label: \"Delete\",\n        icon: \"pi pi-trash\",\n        className: \"p-button-rounded p-button-danger\",\n        onClick: () => confirmDelete(rowData.id)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 13\n    }, this);\n  };\n  const dynamicColumns = columns.map(col => {\n    if (col.field === 'actions') {\n      return {\n        ...col,\n        body: actionTemplate\n      };\n    }\n    return col;\n  });\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Toast, {\n      ref: toast\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Table, {\n      value: data,\n      header: resource,\n      className: \"p-datatable-striped\",\n      children: dynamicColumns.map(col => /*#__PURE__*/_jsxDEV(\"columns\", {\n        field: col.field,\n        header: col.header\n      }, col.field, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 21\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 92,\n    columnNumber: 9\n  }, this);\n};\n_s(Dashboard, \"BkO4NHwuJ3xWEaXm1a4Ib8ATBlI=\", false, function () {\n  return [useQuery, useMutation, useMutationMode, useResource];\n});\n_c = Dashboard;\nasync function deleteData(proyectoId) {\n  try {\n    const response = await fetch(`http://localhost:3000/projects/${proyectoId}`, {\n      method: \"DELETE\"\n    });\n    if (response.ok) {\n      // Mostrar una alerta SweetAlert al eliminar el proyecto\n      Swal.fire({\n        title: 'Proyecto eliminado',\n        text: 'El proyecto ha sido eliminado exitosamente.',\n        icon: 'success',\n        confirmButtonText: 'Aceptar'\n      });\n      // No necesitamos actualizar la lista de proyectos aquí\n    } else {\n      console.error(\"Error al eliminar el proyecto:\", response.statusText);\n    }\n  } catch (error) {\n    console.error(\"Error al comunicarse con el servidor:\", error);\n  }\n}\nexport default Dashboard;\nvar _c;\n$RefreshReg$(_c, \"Dashboard\");","map":{"version":3,"names":["React","useState","useEffect","useQuery","useMutation","QueryClient","Table","Button","confirmDialog","Toast","useMutationMode","useResource","Swal","jsxDEV","_jsxDEV","queryClient","Dashboard","_s","proyectos","setProyectos","data","isLoading","error","Promise","resolve","enabled","length","fetchData","response","fetch","ok","json","console","statusText","mutate","deleteItem","deleteData","onSuccess","invalidateQueries","toast","current","show","severity","summary","detail","onError","setIsEditing","resource","confirmDelete","id","message","header","icon","accept","reject","editItem","useRef","children","fileName","_jsxFileName","lineNumber","columnNumber","columns","field","actionTemplate","rowData","label","className","onClick","dynamicColumns","map","col","body","ref","value","_c","proyectoId","method","fire","title","text","confirmButtonText","$RefreshReg$"],"sources":["/home/general/Escritorio/Front_stafko/src/Components/Proyectos/Dashboard.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useQuery, useMutation, QueryClient } from 'react-query';\nimport { Table } from 'primereact/table';\nimport { Button } from 'primereact/button';\nimport { confirmDialog } from 'primereact/confirmdialog';\nimport { Toast } from 'primereact/toast';\nimport { useMutationMode, useResource } from '@pankod/refine';\nimport Swal from 'sweetalert2';\n\nconst queryClient = new QueryClient();\n\nconst Dashboard = () => {\n    const [proyectos, setProyectos] = useState([]);\n    const { data, isLoading, error } = useQuery('data', () => Promise.resolve(proyectos), {\n        enabled: !!proyectos.length,\n    });\n\n    useEffect(() => {\n        async function fetchData() {\n            try {\n                const response = await fetch(\"http://localhost:3000/projects/\");\n                if (response.ok) {\n                    const data = await response.json();\n                    setProyectos(data);\n                } else {\n                    console.error(\"Error al obtener los proyectos:\", response.statusText);\n                }\n            } catch (error) {\n                console.error(\"Error al comunicarse con el servidor:\", error);\n            }\n        }\n        fetchData();\n    }, []);\n\n    const { mutate: deleteItem } = useMutation(deleteData, {\n        onSuccess: () => {\n            queryClient.invalidateQueries('data');\n            toast.current.show({ severity: 'success', summary: 'Success', detail: 'Item deleted successfully' });\n        },\n        onError: () => {\n            toast.current.show({ severity: 'error', summary: 'Error', detail: 'Failed to delete item' });\n        },\n    });\n    const { setIsEditing } = useMutationMode();\n    const resource = useResource();\n\n    const confirmDelete = (id) => {\n        confirmDialog({\n            message: 'Are you sure you want to delete this item?',\n            header: 'Delete Confirmation',\n            icon: 'pi pi-info-circle',\n            accept: () => {\n                deleteItem(id);\n            },\n            reject: () => {},\n        });\n    };\n\n    const editItem = (id) => {\n        setIsEditing({ [resource]: id });\n    };\n\n    const toast = React.useRef(null);\n\n    if (isLoading) return <div>Loading...</div>;\n    if (error) return <div>Error: {error.message}</div>;\n\n    const columns = [\n        { field: 'id', header: 'ID' },\n        { field: 'name', header: 'Name' },\n        { field: 'description', header: 'Description' },\n        { field: 'actions', header: 'Actions' },\n    ];\n\n    const actionTemplate = (rowData) => {\n        return (\n            <div>\n                <Button label=\"Edit\" icon=\"pi pi-pencil\" className=\"p-button-rounded p-button-info\" onClick={() => editItem(rowData.id)} />\n                <Button label=\"Delete\" icon=\"pi pi-trash\" className=\"p-button-rounded p-button-danger\" onClick={() => confirmDelete(rowData.id)} />\n            </div>\n        );\n    };\n\n    const dynamicColumns = columns.map((col) => {\n        if (col.field === 'actions') {\n            return { ...col, body: actionTemplate };\n        }\n        return col;\n    });\n\n    return (\n        <div>\n            <Toast ref={toast} />\n            <Table value={data} header={resource} className=\"p-datatable-striped\">\n                {dynamicColumns.map((col) => (\n                    <columns key={col.field} field={col.field} header={col.header} />\n                ))}\n            </Table>\n        </div>\n    );\n};\n\nasync function deleteData(proyectoId) {\n    try {\n        const response = await fetch(`http://localhost:3000/projects/${proyectoId}`, {\n            method: \"DELETE\"\n        });\n        if (response.ok) {\n            // Mostrar una alerta SweetAlert al eliminar el proyecto\n            Swal.fire({\n                title: 'Proyecto eliminado',\n                text: 'El proyecto ha sido eliminado exitosamente.',\n                icon: 'success',\n                confirmButtonText: 'Aceptar'\n            });\n            // No necesitamos actualizar la lista de proyectos aquí\n        } else {\n            console.error(\"Error al eliminar el proyecto:\", response.statusText);\n        }\n    } catch (error) {\n        console.error(\"Error al comunicarse con el servidor:\", error);\n    }\n}\n\n\nexport default Dashboard;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}